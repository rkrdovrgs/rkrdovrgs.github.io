<template>
    <require from="admin/lesson-activity/details/details.css"></require>
    <a href="${lesson.url}" class="btn btn-default">Lesson ${lesson.week}.${lesson.day}</a>
    <a if.bind="!!activity.key" href="${activity.view}" target="blank" class="btn btn-primary"><i class="fa fa-eye"></i> Preview Activity</a>
    <hr>
    <form>
        <h2>Activity</h2>
        <button type="submit" click.trigger="saveActivity()" class="btn btn-success"><i class="fa fa-save"></i> Save</button>
        <hr>
        <div class="form-group">
            <label>Name</label>
            <input type="text" class="form-control" placeholder="Name" value.bind="activity.name">
        </div>
        <div class="form-group checkbox-list">
            <label>
                <input type="checkbox" checked.bind="activity.hideComments">
                Hide comments?
            </label>
            <label>
                <input type="checkbox" checked.bind="activity.hideCode">
                Hide code?
            </label>
        </div>
        <div class="form-group radiobutton-list">
            <label>
                <input type="radio" name="activity-type" value="one-answer" checked.bind="activity.type">
                One answer
            </label>
            <label>
                <input type="radio" name="activity-type" value="all-answers" checked.bind="activity.type">                
                All answers
            </label>
            <label>
                <input type="radio" name="activity-type" value="blink" checked.bind="activity.type">                
                Blink
            </label>
        </div>
        <div class="form-group row" if.bind="activity.type === 'blink'">
            <div class="col-xs-6">
                <label>Speed ratio</label>
                <input type="number" class="form-control" placeholder="Speed ratio" value.bind="activity.speedRatio">
            </div>
            <div class="col-xs-6">
                <label>Tries</label>
                <input type="number" class="form-control" placeholder="Tries" value.bind="activity.tries">
            </div>
        </div>
        <div class="form-group radiobutton-list" if.bind="activity.type === 'one-answer' && answersTakenUrl">
            <label>
                <a href="${answersTakenUrl}">See who's taken the answers?</a>
            </label>
        </div>

        <div if.bind="!!activity.key">
            <hr>
            <h2>Answers</h2>
            <hr if.bind="answers.length">
            <ul>
                <li class="row" repeat.for="answer of answers">
                    <div class="col-xs-12">
                        <textarea class="form-control" rows="3" value.bind="answer.value"></textarea>
                    </div>
                    <div class="col-xs-12">
                        <hljs code.bind="answer.value" hide-comments.bind="activity.hideComments" hide-code.bind="activity.hideCode"></hljs>
                    </div>
                    <div class="col-xs-12">
                        <button click.trigger="removeAnswer(answer.key, $index)" class="btn btn-default"><i class="fa fa-trash"></i> Remove answer</button>
                    </div>
                </li>
            </ul>
            <button click.trigger="addAnswer()" class="btn btn-default"><i class="fa fa-plus"></i> Add answer</button>
            <button if.bind="answers.length" type="submit" click.trigger="saveActivity()" class="btn btn-success"><i class="fa fa-save"></i> Save</button>
        </div>
    </form>
</template>